# 二维图形变换
- 向量
	- 从几何的角度看，向量是具有长度和方向的实体，但是没有位置  而点是只有位置，没有长度和方向 在几何中把向量看成从一个点到另一个点的位移。向量算法提供了一种统一的方法来对几何思想进行代数的表示
	- 可以把向量表示成它所有分量的列表，一个n维向量就是一个n元组
		- ![[Pasted image 20211031165740.png]]
		- 仿射组合：如果线性组合的系数a 1 ,a 2 ,...,a m 的和等于1，那么它就是仿射组合
		- 凸组合：![[Pasted image 20211031165955.png]]
	- 向量的度量和单位向量
		- 向量大小 ![[Pasted image 20211031170145.png]]
		- 有时需要缩放向量，使它的长度为1，这一过程叫做向量的归一化，归一化的结果叫单位向量
			- ![[Pasted image 20211031170502.png]]
	- 向量的点积和叉积
		- 点积得到标量，叉积产生一个新的向量
			- ![[Pasted image 20211031204143.png]]
			- ![[Pasted image 20211031204548.png]]
		- 由于两个向量的点积和它们之间夹角的余弦成正比，可以得出以下关于两个非零向量夹角与点积的关系：
			- ![[Pasted image 20211031204700.png]]
	- 向量的叉积
		- 两个向量的叉积是另一个三维向量。叉积只对三维向量有意义。它有许多有用的属性，但最常用的一个是它与原来的两个向量都正交。
			- ![[Pasted image 20211031205016.png]]
			- ![[Pasted image 20211031205133.png]]
--- 
- ## 图形坐标系
	- 分析工具：
		- 向量分析和图形变换
	- 基本概念：坐标系是建立图形与数之间对应联系的参考系
		- 1、坐标系的分类
			- 从维度上看，可分为一维、二维、三维坐标系
			- 从坐标轴之间的空间关系来看，可分为直角坐标系、极坐标系、圆柱坐标系、球坐标系等
		- 2、计算机图形学中坐标系的分类
			- 世界坐标系：程序员可以用最适合他们手中问题的坐标系来描述对象，并且可以自动的缩放和平移图形，使得其能正确地在屏幕窗口中显示这个描述对象的空间被称为世界坐标系，即场景中物体在实际世界中的坐标。**世界坐标系是一个公共坐标系，是现实中物体或场景的统一参照系**
			- 建模坐标系：又被称为局部坐标系。每个物体都有它自己的局部中心和坐标系。建模坐标系独立于世界坐标系来定义物体的几何特性
			- 观察坐标系：观察坐标系主要用于从观察者的角度对整个世界坐标系内的对象进行重新定位和描述。依据观察窗口的方向和形状在世界坐标系中定义的坐标系称为观察坐标系。观察坐标系用于指定图形的输出范围。
				- 二维观察变换的一般方法是在世界坐标系中指定一个观察坐标系统，以该系统为参考通过选定方向和位置来制定矩形剪裁窗口。
			- 设备坐标系：适合特定输出设备输出对象的坐标系。比如屏幕坐标系在多数情况下，对于每一个具体的显示设备，都有一个单独的坐标系统。(设备坐标是整数)
			- 规范化坐标系：规范化坐标系独立于设备，能容易地转变为设备坐标系，是一个中间坐标系。为使图形软件能在不同的设备之间移植，采用规范化坐标，坐标轴取值范围是0-1
---
- ## 二维图形变换
	- 图形变换
		- 用途：图形变换和观察是计算机图形学的基础内容之一，也是图形显示过程中不可缺少的一个环节，一个简单的图形，通过各种变换（如：比例、旋转、镜象、错切、平移等）可以形成一个丰富多彩的图形或图案
			- 1.由一个基本的图案，经过变换组合成另一个复杂图形
			- 2.用很少的物体组成一个场景
			- 3.可以通过图形变换组合得到动画效果
		- 图形变换的基本原理：
			- 1.图形变化了，但原图形的连边规则没有改变（大小比例变换）
			- 2.图形的变化，是因为顶点位置的改变决定的	（位置）
		- 仿射变换（Affine Transformation或 Affine Map）：是一种二维坐标到二维坐标之间的线性变换
			- 1.平直性：直线经过变换之后依然是直线
			- 2.平行线：平行线依然是平行线，且直线上点的位置顺序不变
			- ![[Pasted image 20211102100114.png]]
			- 称为二维仿射变换（ affine transformation ），其中坐标x’和y’都是原始坐标x和y的线性函数参数a，b，c，d，m和n是函数的系数
	- 齐次坐标
		- 在二维平面内，我们是用一对坐标值（x,y）来表示一个点在平面内的确切位置，或着说是用一个向量（x,y）来标定一个点的位置
		- 坐标变换可以写成以下形式
			- ![[Pasted image 20211102100348.png]]
			- 上两式是完全等价的。对于向量（x,y,1），可以在几何意义上理解为是在第三维为常数的平面上的一个二维向量。
		- 用一个n+1维的向量表示一个n维向量的方法称为齐次坐标表示法，用一个n+1维的向量表示一个n维向量的方法称为齐次坐标表示法。 n维向量的变换是在n+1维的空间进行的，变换后的n维结果是被反投回到感兴趣的特定的维空间内而得到的。
		- 如n维向量（p 1 ,p 2 ,...,p n ）表示为（hp 1 ,hp 2 ,...,hp n ,h），其中h称为哑坐标。
			- ![[Pasted image 20211102101022.png]]
			- ![[Pasted image 20211102101121.png]]
			- 当h = 1时产生的齐次坐标称为“规格化坐标”，因为前n个坐标就是普通坐标系下的n维坐标
			- 运用齐次坐标，是将图形引入高次坐标系（对图形没有影响）为齐次运算提供可行性和方便。
---
- ## 基本几何变换
	-  图形的 几何变换是指对图形的几何信息经过平移、比例、旋转等变换后产生新的图形
	-  平移变换：
		-  **平移**是指将p点沿直线路径从一个坐标位置移到另一个坐标位置的重定位过程
		-  ![[Pasted image 20211102102211.png]]
		-  变换公式：
			-  ![[Pasted image 20211102102310.png]]
		-  平移是一种不产生变形而移动物体的刚体变换，即物体上的每个点移动相同数量的坐标
	-  比例变换：
		-  **比例变换**是指对p点相对于坐标原点沿x方向放缩Sx倍，沿y方向放缩Sy倍。其中Sx和Sy称为比例系数
		-  ![[Pasted image 20211102102557.png]]
		-  缩放系数sx和sy可以赋予任何正整数。值小于1缩小物体的尺寸，值大于1则放大物体，都指定为1，物体尺寸就不会改变
		-  sx与sy关系导致图形变换：
			-  ![[Pasted image 20211102102729.png]]
		-  整体变换（Sx=Sy）：
			-  ![[Pasted image 20211102102834.png]]
			-  S为变换比例倒数！！！！！
	-  对称变换：
		-  对称变换也称为反射变换或镜像变换，变换后的图形是原图形关于某一轴线或原点的镜像。
		-  关于x轴对称：
			-  点P经过关于X轴的对称变换后形成点P * ，则x * =x且y * =-y，写成齐次坐标的计算形式为：
			-  ![[Pasted image 20211102104158.png]]
		-  关于y轴对称：
			-  点P经过关于X轴的对称变换后形成点P * ，则x * =-x且y * =y，写成齐次坐标的计算形式为：
			-  ![[Pasted image 20211102105051.png]]
	-  旋转变换：
		-  二维旋转是指将P点绕坐标原点转动某个角度θ（逆时针为正，顺时针为负）得到新的点P * 的重定位过程
		-  ![[Pasted image 20211102130749.png]]
		-  原坐标转换方程
			-  ![[Pasted image 20211102131020.png]]
		-  二维图形齐次坐标方程转换形式
			-  ![[Pasted image 20211102131129.png]]
	-  错切变换：
		-  在图形学的应用中，有时需要产生弹性物体的变形处理，这就要用到错切变换。
		-  x值或y值越小，错切量越小； x值或y值越大，错切量越大。其变换矩阵为：
			-  ![[Pasted image 20211102142254.png]]
	- 除了平移变换其他均可以利用二维矩阵书写
	- 复合变换：
		- 复合变换是指图形作一次以上的几何变换，变换结果是每次的**变换矩阵**相乘
		- 另一方面，任何一个复杂的几何变换都可以看成基本图形变换的组合形式
		- 运算不符合分配律和结合律，所以计算顺序很关键
	- 坐标系之间的变换：
		- 首先把两坐标系原点和坐标轴重合
	- 相对于任意参考点的二维几何变换：
		- 比例、旋转变换等均与参考点相关。如要对某个参考点（x f ，y f ）作二维几何变换，其变换过程如下：
			- a、将固定点移至坐标原点，此时进行平移变换
			- b、针对原点进行二维几何变换
			- c、进行反平移，将固定点又移回到原来的位置
---
- ## 窗口视区变换
	- 窗口和视区：
		- 世界坐标系中要显示的区域（通常在观察坐标系内定义）称为窗口
		- 窗口映射到显示器(设备)上的区域称为视区
		- 窗口定义显示什么；视区定义在何处显示
		- 世界坐标系中的一个窗口可以对应于多个视区
		- 如何将窗口内的图形在视区中显示出来呢？
		- 必须经过将窗口到视区的变换处理，这种变换就是观察变换（Viewing Transformation）
---
- ## 观察变换
	- 产生的效果：
		- 变焦距效果：
			- ![[Pasted image 20211102150649.png]]
			- 当窗口变小时，由于视区大小不变，就可以放大图形对象的某一部分，从而观察到在较大的窗口时未显示出的细节
		- 整体缩放效果：
			- 当窗口大小不变而视区大小发生变化时，得到整体放缩效果。这种放缩不改变观察对象的内容
	- 窗口到视区的映射：为了全部、如实地在视区中显示出窗口内的图形对象，就必须求出图形在窗口和视区间的映射关系
		- ![[Pasted image 20211102152554.png]]
		- ![[Pasted image 20211102152706.png]]
		- ![[Pasted image 20211102153013.png]]
		- ![[Pasted image 20211102153152.png]]
		- ![[Pasted image 20211102153251.png]]
---
- 小结：
	- 二维空间中某点的变化可以表示成点的齐次坐标与3阶的二维变换矩阵T 2d 相乘
	- ![[Pasted image 20211102144729.png]]
	- 二维变换矩阵各部分对图形变换的影响
		- ![[Pasted image 20211102144854.png]]
	- 计算：几何变换均可表示成：P * =P · T的形式，其中，P为变换前二维图形的规范化齐次坐标，P * 为变换后的规范化齐次坐标 ，T为变换矩阵。
		- 点变换
			- ![[Pasted image 20211102145002.png]]
		- 直线变换
			- ![[Pasted image 20211102145025.png]]
		- 多边形变换
			- ![[Pasted image 20211102145145.png]]